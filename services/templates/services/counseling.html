{% extends '_base_services.html' %}

{% load static %}
{% load i18n %}
{% load jalali_tags %}
{% load number_converter %}
{% load widget_tweaks %}


{% block title %}{% trans 'Counseling' %}{% endblock %}

{% block content %}

    <main class="flex-grow bg-secondary-light pb-14 pt-36 dark:bg-primary-dark xs:pt-36" style="background-color: transparent">
        <div class="container pb-14">
            <div class="grid grid-cols-12 gap-2 lg:gap-6 ">

                <!-- top ribbon  -->
                <div class="col-span-12 rounded-lg bg-primary-light dark:bg-secondary-dark">
                    <ol class="grid grid-cols-2 overflow-hidden rounded-lg">
                        <li class="flex flex-col items-center justify-center gap-2 bg-tertiary-500/10 p-4 text-xs text-tertiary-500 dark:bg-tertiary-400/10 dark:text-tertiary-400 sm:text-sm md:text-base" style="background-color: #00A65C;">
                            <p class="leading-none" style="font-size: 1.3em; color: #fefeff; font-weight: bold">{% trans 'Submit a counseling request' %}</p>
                        </li>
                        <li class="flex flex-col items-center justify-center gap-2 p-4 text-xs text-tertiary-500 opacity-50 dark:text-tertiary-400 sm:text-sm md:text-base" style="background-color: #fefeff">
                            <p class="leading-none" style="font-size: 1.3em; color: #00a65c; font-weight: bold">{% trans 'Detail of counseling request' %}</p>
                        </li>
                  </ol>
                </div>
                <!-- end: top ribbon -->

                <!-- main counseling form  -->
                <div class="col-span-12 md:col-span-12">
                    <div class="rounded-lg bg-primary-light p-4 dark:bg-secondary-dark">

                        <div class="col-span-5 md:col-span-3">
                            <div class="grid grid-cols-1 items-center gap-6 mt-2 ">
                                <form method="post" novalidate>
                                    {% csrf_token %}

                                    <!-- Counseling type -->
                                    <div class="col-span-2 md:col-span-1 mt-2 mb-12">
                                        <label for="{{ form.counseling_type.id_for_label }}" class="relative block rounded-lg border border-secondary-light shadow-base dark:border-primary-light/5 mb-2">
                                            <span class="pointer-events-none absolute start-2.5 top-0 -translate-y-1/2 bg-primary-light px-2 py-0.5 text-sm text-quaternary-600 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-focus:top-0 peer-focus:text-sm dark:bg-secondary-dark dark:text-quaternary-300 mr-4">
                                              {% trans 'Choose the counseling type' %}
                                            </span>
                                            {% render_field form.counseling_type type="text" id="counseling_type" class="peer w-full rounded-lg border-none bg-transparent px-4 py-3 text-quaternary-700 placeholder-transparent focus:outline-none focus:ring-0 dark:text-primary-light" %}
                                        </label>
                                        {% if form.counseling_type.errors %}
                                            {% for error in form.counseling_type.errors %}
                                                <p style="color: red; font-size: 0.9em;">{{ error }}</p>
                                            {% endfor %}
                                        {% endif %}
                                    </div>

                                    <!-- City -->
                                    <div class="col-span-2 md:col-span-1 mt-2 mb-12">
                                        <label for="{{ form.city.id_for_label }}" class="relative block rounded-lg border border-secondary-light shadow-base dark:border-primary-light/5 mb-2">
                                            <span class="pointer-events-none absolute start-2.5 top-0 -translate-y-1/2 bg-primary-light px-2 py-0.5 text-sm text-quaternary-600 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-focus:top-0 peer-focus:text-sm dark:bg-secondary-dark dark:text-quaternary-300 mr-4">
                                              {% trans 'Only in Teharn, at Hombaba place:' %}
                                            </span>
                                            {% render_field form.city type="text" id="city" readonly="readonly" class="peer w-full rounded-lg border-none bg-transparent px-4 py-3 text-quaternary-700 placeholder-transparent focus:outline-none focus:ring-0 dark:text-primary-light" %}
                                        </label>
                                        {% if form.city.errors %}
                                            {% for error in form.city.errors %}
                                                <p style="color: red; font-size: 0.9em;">{{ error }}</p>
                                            {% endfor %}
                                        {% endif %}
                                    </div>

                                    <!-- Date -->
                                    <div class="col-span-2 md:col-span-1 mb-12">
                                        <label for="{{ form.date.id_for_label }}" class="relative block rounded-lg border border-secondary-light shadow-base dark:border-primary-light/5 mb-2">
                                            <span class="pointer-events-none absolute start-2.5 top-0 -translate-y-1/2 bg-primary-light px-2 py-0.5 text-sm text-quaternary-600 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-focus:top-0 peer-focus:text-sm dark:bg-secondary-dark dark:text-quaternary-300 mr-4">
                                                {% trans 'Choose the counseling date' %}
                                            </span>
                                            {% render_field form.date type="text" id="date" class="peer w-full rounded-lg border-none bg-transparent px-4 py-3 text-quaternary-700 placeholder-transparent focus:outline-none focus:ring-0 dark:text-primary-light" %}
                                        </label>
                                        {% if form.date.errors %}
                                            {% for error in form.date.errors %}
                                                <p style="color: red; font-size: 0.9em;">{{ error }}</p>
                                            {% endfor %}
                                        {% endif %}
                                    </div>

                                    <!-- Time -->
                                    <div class="col-span-2 md:col-span-1 mb-12">
                                        <label for="{{ form.time.id_for_label }}" class="relative block rounded-lg border border-secondary-light shadow-base dark:border-primary-light/5 mb-2">
                                            <span class="pointer-events-none absolute start-2.5 top-0 -translate-y-1/2 bg-primary-light px-2 py-0.5 text-sm text-quaternary-600 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-focus:top-0 peer-focus:text-sm dark:bg-secondary-dark dark:text-quaternary-300 mr-4">
                                                {% trans 'Choose the counseling time' %}
                                            </span>
                                            {% render_field form.time class="peer w-full rounded-lg border-none bg-transparent px-4 py-3 text-quaternary-700 placeholder-transparent focus:outline-none focus:ring-0 dark:text-primary-light" %}
                                        </label>
                                        {% if form.date.errors %}
                                            {% for error in form.date.errors %}
                                                <p style="color: red; font-size: 0.9em;">{{ error }}</p>
                                            {% endfor %}
                                        {% endif %}
                                    </div>

                                    <!-- Name -->
                                    <div class="col-span-2 md:col-span-1 mb-12">
                                        <label for="{{ form.name_and_family.id_for_label }}" class="relative block rounded-lg border border-secondary-light shadow-base dark:border-primary-light/5 mb-2">
                                            <span class="pointer-events-none absolute start-2.5 top-0 -translate-y-1/2 bg-primary-light px-2 py-0.5 text-sm text-quaternary-600 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-base peer-focus:top-0 peer-focus:text-sm dark:bg-secondary-dark dark:text-quaternary-300 mr-4">
                                                {% trans 'First and last name' %}
                                            </span>
                                            {% render_field form.name_and_family type="text" id="name_and_family" class="peer w-full rounded-lg border-none bg-transparent px-4 py-3 text-quaternary-700 placeholder-transparent focus:outline-none focus:ring-0 dark:text-primary-light" %}
                                        </label>
                                        {% if form.date.errors %}
                                            {% for error in form.date.errors %}
                                                <p style="color: red; font-size: 0.9em;">{{ error }}</p>
                                            {% endfor %}
                                        {% endif %}
                                    </div>

                                    <!-- Submit -->
                                    <div class="col-span-2 flex justify-end">
                                        <button style="padding: 1em 2.5em;!important;" type="submit" class="btn-primary w-full px-4 py-2 md:w-auto">{% trans 'Submit the counseling request' %}</button>
                                    </div>

                                </form>

                                <!-- JS -->
                                <script type="text/javascript">
                                    document.addEventListener('DOMContentLoaded', function () {
                                        const counselingTypeField = document.getElementById('counseling_type');
                                        const cityField = document.getElementById('city').closest('div');

                                        function toggleCityDistrictFields() {
                                            if (counselingTypeField.value === 'ip') {
                                                cityField.style.display = 'block';
                                            } else {
                                                cityField.style.display = 'none';
                                            }
                                        }
                                        counselingTypeField.addEventListener('change', toggleCityDistrictFields);
                                        toggleCityDistrictFields();
                                    });
                                </script>

                            </div>
                        </div>

                    </div>
                </div>
                <!-- end: main counseling form  -->

            </div>
        </div>
    </main>

{% endblock %}


